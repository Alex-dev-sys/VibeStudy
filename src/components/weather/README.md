# Weather System

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–≥–æ–¥—ã —Å 3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è VibeStudy.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üå§Ô∏è –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ —á–µ—Ä–µ–∑ WeatherAPI
- ‚ùÑÔ∏è –ê–Ω–∏–º–∞—Ü–∏—è —Å–Ω–µ–≥–∞ —Å 1000 —á–∞—Å—Ç–∏—Ü–∞–º–∏
- üåßÔ∏è –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ–∂–¥—è —Å 2000 —á–∞—Å—Ç–∏—Ü–∞–º–∏
- üåû –ü–µ—Ä–µ—Ö–æ–¥—ã –¥–µ–Ω—å/–Ω–æ—á—å —Å –ø–ª–∞–≤–Ω—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –æ—Å–≤–µ—â–µ–Ω–∏—è
- üéÆ –ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- ‚ôø –ü–æ–¥–¥–µ—Ä–∂–∫–∞ accessibility (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, screen readers, reduced motion)
- ‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å instanced rendering

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
```bash
npm install three @react-three/fiber @react-three/drei @types/three --legacy-peer-deps
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API –∫–ª—é—á –Ω–∞ https://www.weatherapi.com/
2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env.local`:
```env
WEATHER_API_KEY=your_api_key_here
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
import { WeatherSystem } from '@/components/weather';

export default function Page() {
  return (
    <div>
      <WeatherSystem />
    </div>
  );
}
```

### –° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º

```tsx
<WeatherSystem defaultLocation="London" />
```

### –¢–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

```tsx
import { WeatherToggle } from '@/components/weather';

<WeatherToggle className="absolute top-4 right-4" />
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### WeatherSystem
–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–≥–æ–¥—ã.

**Props:**
- `defaultLocation?: string` - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–≥–æ–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 'auto:ip')
- `className?: string` - CSS –∫–ª–∞—Å—Å—ã

### WeatherToggle
–ö–Ω–æ–ø–∫–∞ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –ø–æ–≥–æ–¥–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.

**Props:**
- `className?: string` - CSS –∫–ª–∞—Å—Å—ã

### WeatherScene
3D —Å—Ü–µ–Ω–∞ —Å –ø–æ–≥–æ–¥–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ WeatherSystem).

### Sun
3D –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–ª–Ω—Ü–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–µ–Ω—å/–Ω–æ—á—å.

**Props:**
- `intensity?: number` - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∞ (0.3 –¥–ª—è –Ω–æ—á–∏, 1.0 –¥–ª—è –¥–Ω—è)
- `position?: [number, number, number]` - –ü–æ–∑–∏—Ü–∏—è –≤ 3D –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ

### ParticleSystem
–°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—Ü –¥–ª—è —Å–Ω–µ–≥–∞ –∏ –¥–æ–∂–¥—è.

**Props:**
- `type: 'snow' | 'rain' | 'clear' | null` - –¢–∏–ø –ø–æ–≥–æ–¥—ã
- `count?: number` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–∏—Ü

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- **Clear** (‚òÄÔ∏è) - –ß–∞—Å—Ç–∏—Ü—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç
- **Rain** (üåßÔ∏è) - 2000 –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–ø–µ–ª—å –¥–æ–∂–¥—è
- **Snow** (‚ùÑÔ∏è) - 1000 –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–Ω–µ–∂–∏–Ω–æ–∫

## Z-Index –∏ –°–ª–æ–∏

–î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

- **WeatherScene**: `z-0` - –§–æ–Ω–æ–≤—ã–π —Å–ª–æ–π, –∑–∞ –≤—Å–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **WeatherToggle**: `z-50` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞, –Ω–∞–¥ –≤—Å–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **Canvas**: `pointer-events-none` - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–ª–∏–∫–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –ø–æ–≥–æ–¥–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ, –∞ –≤—Å–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏.

## API

### Weather Store (Zustand)

```tsx
import { useWeatherStore } from '@/store/weather-store';

const {
  isEnabled,        // –í–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ø–æ–≥–æ–¥–∞
  condition,        // 'clear' | 'rain' | 'snow'
  isDaytime,        // –î–µ–Ω—å –∏–ª–∏ –Ω–æ—á—å
  temperature,      // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ ¬∞C
  location,         // –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
  isLoading,        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  error,            // –û—à–∏–±–∫–∞
  toggleWeather,    // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–≥–æ–¥—É
  fetchWeatherData, // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
} = useWeatherStore();
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **FPS**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 60 FPS –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–ü–∞–º—è—Ç—å**: ~50MB –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏
- **Bundle Size**: ~200KB (gzipped)
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
  - Instanced rendering –¥–ª—è —á–∞—Å—Ç–∏—Ü
  - Frustum culling
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ reduced motion
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

## Accessibility

- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ ARIA labels –∏ —Ä–æ–ª–∏
- ‚úÖ Screen reader –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ prefers-reduced-motion
- ‚úÖ WCAG AA —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- –û—à–∏–±–∫–∏ —Å–µ—Ç–∏ (fallback –Ω–∞ clear –ø–æ–≥–æ–¥—É)
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π API –∫–ª—é—á
- Rate limiting (exponential backoff)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ WebGL –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/components/weather/
‚îú‚îÄ‚îÄ WeatherSystem.tsx      # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îú‚îÄ‚îÄ WeatherToggle.tsx      # –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ WeatherScene.tsx       # 3D —Å—Ü–µ–Ω–∞
‚îú‚îÄ‚îÄ Sun.tsx                # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–ª–Ω—Ü–∞
‚îú‚îÄ‚îÄ ParticleSystem.tsx     # –°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—Ü
‚îú‚îÄ‚îÄ index.ts               # –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

src/store/
‚îî‚îÄ‚îÄ weather-store.ts       # Zustand store

src/lib/weather/
‚îî‚îÄ‚îÄ weather-api.ts         # API –∫–ª–∏–µ–Ω—Ç

src/app/api/weather/
‚îî‚îÄ‚îÄ route.ts               # API endpoint
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏:
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ accessibility —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ VibeStudy
