# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç Telegram –±–æ—Ç–∞

## –¢–æ–∫–µ–Ω –±–æ—Ç–∞ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!

–í–∞—à –±–æ—Ç: `8584552955:AAHadQf9Zr4EVEBHsV0-zkj6TREAHHksxD0`

## –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ë–ï–ó –¥–µ–ø–ª–æ—è)

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç

```bash
npm run bot:test
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç polling (–Ω–µ –Ω—É–∂–µ–Ω webhook)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ ngrok
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 2: –ù–∞–π–¥–∏ –±–æ—Ç–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π Telegram
2. –ù–∞–π–¥–∏ –±–æ—Ç–∞ (username –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ –∫–æ–Ω—Å–æ–ª–∏)
3. –û—Ç–ø—Ä–∞–≤—å `/start`

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –∫–æ–º–∞–Ω–¥—ã

```
/start    - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
/help     - –°–ø—Ä–∞–≤–∫–∞
/stats    - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/progress - –ü—Ä–æ–≥—Ä–µ—Å—Å
/topics   - –¢–µ–º—ã
/settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Next.js

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π `.env.local.example` –≤ `.env.local`:

```bash
cp .env.local.example .env.local
```

–ó–∞–ø–æ–ª–Ω–∏ Supabase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã).

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

#### –ß–µ—Ä–µ–∑ Supabase Dashboard:
1. –û—Ç–∫—Ä–æ–π SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `supabase/migrations/001_telegram_bot_tables.sql`
3. –í—ã–ø–æ–ª–Ω–∏

#### –ò–ª–∏ —á–µ—Ä–µ–∑ CLI:
```bash
supabase db push
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏ dev —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π ngrok (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook)

–í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ ngrok –µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç
# https://ngrok.com/download

# –ó–∞–ø—É—Å—Ç–∏ —Ç—É–Ω–Ω–µ–ª—å
ngrok http 3000
```

–°–∫–æ–ø–∏—Ä—É–π HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

### –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∏ webhook

```bash
# –ó–∞–º–µ–Ω–∏ URL –Ω–∞ —Å–≤–æ–π ngrok URL
npm run bot:webhook set https://abc123.ngrok.io/api/telegram/webhook
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å webhook

```bash
npm run bot:webhook check
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!
URL: https://abc123.ngrok.io/api/telegram/webhook
Pending updates: 0
```

### –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä—É–π!

–ù–∞–π–¥–∏ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å `/start`

## –í–∞—Ä–∏–∞–Ω—Ç 3: Production –¥–µ–ø–ª–æ–π –Ω–∞ Vercel

### –®–∞–≥ 1: –î–µ–ø–ª–æ–π –Ω–∞ Vercel

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
vercel env add TELEGRAM_BOT_TOKEN
vercel env add TELEGRAM_WEBHOOK_SECRET
vercel env add CRON_SECRET

# –î–µ–ø–ª–æ–π
vercel --prod
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏ webhook –Ω–∞ production

```bash
# –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π production URL
npm run bot:webhook set https://your-domain.vercel.app/api/telegram/webhook
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å

```bash
npm run bot:webhook check
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
```bash
npm run bot:webhook info
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
```bash
npm run bot:webhook check
```

### –£–¥–∞–ª–∏—Ç—å webhook
```bash
npm run bot:webhook delete
```

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç)

1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω: `npm run bot:test`
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (webhook)

1. –ü—Ä–æ–≤–µ—Ä—å webhook:
```bash
npm run bot:webhook check
```

2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ ngrok —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –û—à–∏–±–∫–∞ "Unauthorized"

- –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `.env.local`
- –£–±–µ–¥–∏—Å—å —á—Ç–æ —Ñ–∞–π–ª `.env.local` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### Webhook –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å HTTPS (–Ω–µ HTTP)
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. ‚úÖ –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
2. üöß –†–µ–∞–ª–∏–∑—É–π AI —Å–µ—Ä–≤–∏—Å (–∑–∞–¥–∞—á–∞ 4)
3. üöß –î–æ–±–∞–≤—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É (–∑–∞–¥–∞—á–∞ 5)
4. üöß –ù–∞—Å—Ç—Ä–æ–π –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–∑–∞–¥–∞—á–∞ 6)

–°–º. `TELEGRAM_BOT_IMPLEMENTATION.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç
npm run bot:test

# 2. –û—Ç–∫—Ä–æ–π Telegram –∏ –Ω–∞–π–¥–∏ –±–æ—Ç–∞
# 3. –û—Ç–ø—Ä–∞–≤—å /start
# 4. –ü–æ–ª—É—á–∏ –æ—Ç–≤–µ—Ç!
```

–ì–æ—Ç–æ–≤–æ! üéâ

